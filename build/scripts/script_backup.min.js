$(document).ready(function(){function t(){$(".burger-panel").css({"animation-name":"toRight","animation-duration":"0.3s","animation-timing-function":"linear"}),$(".background").addClass("opened"),$("html").addClass("no-scroll")}function n(){$(".burger-panel").css({"animation-name":"toLeft","animation-duration":"0.3s","animation-timing-function":"linear"}),setTimeout(function(){$(".background").removeClass("opened"),$("html").removeClass("no-scroll")},300)}var e;function i(){0<$(".rubric-news").length&&(768<window.innerWidth?$(".rubric-news").removeClass("hide"):window.innerWidth<=768&&($(".rubric-news").addClass("hide"),$(document).on("click",".rubric-item__toggle",function(){$(".rubric-news").toggleClass("hide"),e.slick("slickSetOption","draggable",!0,!0)})))}function s(){var e=document.querySelector(".banner-wide--fixed"),t=document.querySelector(".top-container").getBoundingClientRect();e&&t.bottom<0&&e.classList.add("banner-wide--fixed-show")}function o(){var i=document.querySelector("#float-banner"),e=document.querySelector(".push-bunner__close"),o=document.querySelector("#check_banner");function t(){var e,t,n;e=o,t="is-banner",(n=document.createElement("div")).setAttribute("id",t),e.prepend(n),console.log(e.querySelectorAll("#is-banner").length,e.children.length),(1!==e.querySelectorAll("#is-banner").length||1!==e.children.length)&&1===e.querySelectorAll("#is-banner").length&&1<e.children.length?(i.classList.add("is-open"),document.body.style="overflow: hidden;"):i.classList.remove("is-open")}var n=new MutationObserver(function(e){0<e[0].addedNodes.length&&(setTimeout(function(){t(),i.classList.add("is-open"),document.body.style="overflow: hidden;"},500),sessionStorage.setItem("mobile_item_show",!0)),this.disconnect()});t(),o&&n.observe(o,{childList:!0}),e&&e.addEventListener("click",function(){i.classList.remove("is-open"),document.body.removeAttribute("style"),setTimeout(function(){window.addEventListener("scroll",function(){var e=window.pageYOffset/(document.body.clientHeight-window.innerHeight)*100;document.querySelector(".banner-wide--fixed").getAttribute("data-scroll-percent")<e&&s()})},500)})}$(".modal__password-btn").click(function(){var e=$(this).prev(),t=e.attr("type");"password"===t?($(this).addClass("modal__password-btn-open"),e.prop("type","text")):"text"===t&&($(this).removeClass("modal__password-btn-open"),e.prop("type","password"))}),i(),$(".attention .button--close").click(function(e){e.preventDefault(),$(this).closest(".attention").css({display:"none"})}),$(".button--banner").click(function(e){e.preventDefault(),$(this).toggleClass("button--banner-close");e=$(this).closest(".banner-wide--fixed");!(1024<window.innerWidth)||1==e.hasClass("banner-wide--fixed-desc-open")?e.removeClass("banner-wide--fixed-desc-open"):e.addClass("banner-wide--fixed-desc-open")}),$(".button--burger").click(function(e){e.preventDefault(),(0==$(".burger-panel").hasClass("opened-flex")?t:n)()}),$(".button--dark-close").click(function(){(1==$(".burger-panel").hasClass("opened-flex")?n:t)()}),$(".background").click(function(){n()}),$(".enter__link").click(function(){$(".modal-enter__button").removeClass("modal-enter__button--active"),"enter"==$(this).data("btn")?($("#enterbtn").addClass("modal-enter__button--active"),$(".login").show(),$(".registration").hide()):"registr"==$(this).data("btn")&&($("#registrbtn").addClass("modal-enter__button--active"),$(".login").hide(),$(".registration").show())}),$("#enterbtn").click(function(){$(".modal-enter__button").removeClass("modal-enter__button--active"),$("#enterbtn").addClass("modal-enter__button--active"),$(".login").show(),$(".registration").hide()}),$("#registrbtn").click(function(){$(".modal-enter__button").removeClass("modal-enter__button--active"),$("#registrbtn").addClass("modal-enter__button--active"),$(".login").hide(),$(".registration").show()}),$(".button--arrow").click(function(){$(this).toggleClass("button--arrow--rotate")}),$(".button[data-button='hotnews']").click(function(){$(".news-feed").slideToggle().toggleClass("closed")}),$(".search__link").fancybox(),$(".modal-enter__link").click(function(){$.fancybox.close(!0)}),$(".button--fixbanner-close").click(function(e){e.preventDefault(),$(this).closest(".banner-wide--fixed").remove()}),0<$(".is-js-rubric-slider").length&&(e=$(".is-js-rubric-slider").slick({fade:!0,cssEase:"linear",adaptiveHeight:!0,prevArrow:$(".slick-prev"),nextArrow:$(".slick-next"),responsive:[{breakpoint:768,settings:{dots:!0}}]}),$(".is-js-rubric-slider").removeClass("hide")),0<$(".third-card-slider").length&&($(".third-card-slider").slick({speed:500,fade:!0,cssEase:"linear",autoplay:!0}),$(".third-card-slider").removeClass("visually-hide")),0<$(".half-card-slider").length&&($(".half-card-slider").slick({speed:500,fade:!0,cssEase:"linear",autoplay:!0}),$(".half-card-slider").removeClass("visually-hide")),0<$(".photorep-slider").length&&($(".photorep-slider").slick({dots:!0,adaptiveHeight:!0}),$(".photorep-slider").removeClass("hide")),0<$(".review").length&&($(".review").slick({speed:500,adaptiveHeight:!0,arrows:!0,autoplay:!0}),$(".review").removeClass("hide")),$(".progect-textarea--add-comment").hasClass("add-smile")&&$(".add-smile").emojioneArea({events:{keyup:function(e,t){"Escape"===t.key&&(this.hidePicker(),$(".add-comment__smile").removeClass("active"))},keypress:function(e,t){this.hidePicker(),$(".add-comment__smile").removeClass("active")}}})[0].emojioneArea.on("blur",function(){$(".add-comment__smile").removeClass("active")}),$(".add-comment__smile-open").on("click",function(){$(".add-comment__smile").addClass("active"),$(".emojionearea-button-open").trigger("click")}),$(".add-comment__smile-close").on("click",function(){$(".add-comment__smile").removeClass("active"),$(".emojionearea-button-close").trigger("click")}),$(window).resize(function(){1024<window.innerWidth?($(window).scroll(function(){var e=$(this).scrollLeft();$(".headhesive").css({left:-e,"min-width":"1280px"})}),$(".news-feed").removeClass("closed"),$(".news-feed").removeAttr("style")):window.innerWidth<=1024&&($(window).scroll(function(){$(".headhesive").removeAttr("style")}),$(".button--banner").removeClass("button--banner-close"),$(".banner-wide--fixed").removeClass("banner-wide--fixed-desc-open")),i()}),window.innerWidth<=1024&&($(".rubric__news").hide(),$(".rubric__more").hide(),$(".rubric__sub-text").click(function(){$(".rubric__news").toggle(),$(".rubric__more").toggle(),e.slick("slickSetOption","adaptiveHeight",!0,!0)})),window.innerWidth<=767&&null===sessionStorage.getItem("mobile_item_show")&&(setTimeout(function(){console.log(document.querySelector("#check_banner"));var e=document.createElement("div");e.setAttribute("id","my-id"),document.querySelector("#check_banner").append(e)},5e3),a=document.querySelector("#top-banner"))&&(r=new MutationObserver(function(e){0<e[0].addedNodes.length&&o(),this.disconnect()}),o(),r.observe(a,{childList:!0})),1024<window.innerWidth?(window.addEventListener("scroll",s),$(window).scroll(function(){var e=$(this).scrollLeft();$(".headhesive").css({left:-e,"min-width":"1280px"})})):window.innerWidth<=1024&&$(window).scroll(function(){$(".headhesive").removeAttr("style")});var r=(new ClientJS).getCanvasPrint().toString(),a="userhash",r=forge_sha256(r),c=90,l=void 0,d=void 0,u=void 0;a="".concat(a,"=").concat(encodeURIComponent(r)),c&&((r=new Date).setDate(r.getDate()+c),a+="; expires=".concat(r.toUTCString())),l&&(a+="; path=".concat(l)),d&&(a+="; domain=".concat(d)),u&&(a+="; secure"),document.cookie=a}),$(document).ready(function(t){t(window).scroll(function(){400<t(this).scrollTop()&&t(this).scrollTop()<410&&window.innerWidth<767&&t(".news-fix").addClass("show"),t(this).scrollTop()<400&&window.innerWidth<767&&t(".news-fix").removeClass("show")});var e,i=document.querySelector(".reactions");i&&(e=i.getAttribute("data-reaction-url"),t.ajax({url:e,type:"GET",success:function(e){i.innerHTML=(e=>{for(var t="",n=0;n<Object.keys(e[0]).length;n+=1){var i=n+1;t+='<a class="reactions__item" data-reaction="s'+i+'"><img class="reactions__icon" width="20" height="20" src="img/icon-reaction-s'+i+'.svg" alt=""><span class="reactions__value">'+e[0][i]+"</span></a>"}return t})(e),i.addEventListener("click",function(e){e=e.target.getAttribute("data-reaction");console.log(e),e&&t.ajax({url:"/?reaction="+e,type:"GET",success:function(e){for(var t=e,n=0;n<Object.keys(t[0]).length;n+=1)i.children[n].children[1].textContent=t[0][n+1]},error:function(){console.log("Возникла ошибка")}})})},error:function(){console.log("Возникла ошибка")}}))}),$(".news-fix__close").on("click touchstart",function(){$(".news-fix").removeClass("show")});